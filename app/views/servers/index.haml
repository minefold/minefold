- title 'Servers'
- layout :server

.page-header
  %h1 Servers

.server-list
  - if @servers.empty?
    .empty
      %h2 You don't have any servers. Create a new server to start the party!

  - else

    - @servers.each do |game, servers|
      .divider= game.name
      - servers.each do |server|
        .item{class: "is-#{server.state}"}

          %a.primary-action{href: server_path(server)}
            %h2.name= server.name
            .state
              - case server.state
              - when :up, :super
                = server.address
              - else
                Not running

          %ul.nav.nav-pills.nav-pills-images.pull-right
            - if server.world and server.world.mapped?
              %li
                = link_to image_tag('101.png', width: 24, height: 24), map_server_path(server)

            - if can? :update, server
              %li
                %a{href: edit_server_path(server)}
                  = image_tag '265.png', width: 24, height: 24

  - if can? :create, Server
    .new= link_to 'Create a new server', new_server_path, class: %w(btn btn-success)
