<% title 'Get more time' %>

<div class="page-header center">
  <h1>Get more time</h1>
  <p>Complete simple tasks to earn additional server time.</p>
</div>

<div class="page edgeless-page">
  <div class="bonus-list">
    <% if current_user.active_subscription? %>
      <div class="item" data-done>
        <div class="name">Purchase a subscription</div>
      </div>
    <% else %>
      <a class="item" href="<%= plans_page_path %>">
        <div class="name">Purchase a subscription</div>
      </a>
    <% end %>

    <a class="item" href="/i/<%= current_user.invitation_token %>">
      <div class="name">Refer your friends to Minefold</div>
      <div class="reward">
        + <%= time_left Bonuses::ReferredFriend.coins %> per friend
      </div>
      <div class="bonus-referrals-list">
        <ul class="unstyled">
          <% current_user.bonuses.friend_referrals.each do |bonus| %>
            <li>
              <%= bonus.class.pretty_name %>
              &mdash;
              <%= bonus.description %>
              &mdash;
              <%= time_ago_in_words(bonus.created_at) %>
              <% if bonus.coins > 0 %>
                &mdash;
                + <%= time_left bonus.coins %>
              <% end %>
            </li>
          <% end %>
        </ul>
      </div>
    </a>

    <% if Bonuses::LinkedFacebookAccount.new(user: current_user).claimable? %>
      <a class="item mini" href="<%= edit_user_registration_path(anchor: 'accounts') %>">
        <div class="name">Link your Facebook account</div>
        <div class="reward">
          + <%= time_left Bonuses::LinkedFacebookAccount.coins %>
        </div>
      </a>
    <% else %>
      <div class="item mini" data-done>
        <div class="name">Link your Facebook account</div>
        <div class="reward">
          + <%= time_left Bonuses::LinkedFacebookAccount.coins %>
        </div>
      </div>
    <% end %>

    <% if Bonuses::LinkedSteamAccount.new(user: current_user).claimable? %>
      <a class="item mini" href="<%= edit_user_registration_path(anchor: 'accounts') %>">
        <div class="name">Link your Steam account</div>
        <div class="reward">
          + <%= time_left Bonuses::LinkedSteamAccount.coins %>
        </div>
      </a>
    <% else %>
      <div class="item mini" data-done>
        <div class="name">Link your Steam account</div>
        <div class="reward">
          + <%= time_left Bonuses::LinkedSteamAccount.coins %>
        </div>
      </div>
    <% end %>

    <% if current_user.confirmed? %>
      <div class="item mini" data-done>
    <% else %>
      <div class="item mini">
    <% end %>
        <div class="name">Confirm your email address</div>
        <div class="reward">
          + <%= time_left Bonuses::GettingStarted.coins %>
        </div>
    </div>
  </div>
</div>
