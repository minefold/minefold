- title  'Dashboard'

%aside
  = link_to 'Create a new world', new_world_path
  = link_to 'Upload an existing world',new_upload_path

%article
  - if current_user.current_world.nil?
    %p You need to select a world from the list below to play in.

  #switch-worlds-dashboard
    - if current_user.worlds.empty?
      %p
        %strong Sad panda.
        You don't have any worlds you can play in. You can either #{link_to 'create one', new_world_path} or #{link_to 'upload an existing world', upload_path}.
    - else
      %ul
        - current_user.worlds.each do |world|
          %li{class: (current_user.current_world == world ? 'active' : nil)}
            %h3= link_to world.name, world

            .current
              - if current_user.current_world == world
                %button{disabled: true} Currently playing here
              - else
                = button_to 'Play here', [:play, world], method: :put

            - unless world.players.empty?
              .players
                = world.players[0..5].map {|p| p.username }.to_sentence
                - if world.players.length == 1
                  is
                - else
                  are
                playing here.